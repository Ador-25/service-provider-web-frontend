<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Sign Up Page</title>
    <link rel="stylesheet" href="SignupStyle.css">
    <link rel="stylesheet" type=text/css href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
</head>
<body>
    <div class="sign-up-page">
        <h1><i class="fa fa-user-circle"></i>Sign up Here</h1>
            <form id="signup-form">
                <input type="email" class="input-box" placeholder="Email" id="email" style="border-width: 3px; height: 26px;">
                <input type="firstname" class="input-box" placeholder="Firstname" id="firstname"  style="border-width: 3px;height: 26px;">
                <input type="lastname" class="input-box" placeholder="Lastname" id="lastname"  style="border-width: 3px;height: 26px;">
                <input type="phone" class="input-box" placeholder="Phone" id="phone"  style="border-width: 3px;height: 26px;">
                <input type="password" class="input-box" placeholder="Password" id="password"  style="border-width: 3px;height: 26px;">
                <input type="nid" class="input-box" placeholder="nid" id="nid"  style="border-width: 3px;height: 26px;">
                <button onclick="locationGet(event)">
                    Update Location
                </button>
                <select id="ddlViewBy">
                    <option value="1">Electrician</option>
                    <option value="2" selected="selected">Technician</option>
                    <option value="3">Plumber</option>
                  </select>
                <p><span><input type="checkbox"></span> agree to the terms and policy</p>
                <button type="submit" class="signup-btn">Sign up</button>
                <hr>
                <p class="or">OR</p>
                <button type="button" class="google-btn">Log in with Google</button>

           
            </form>
            <script>
                const form = document.getElementById('signup-form')
                let u=''
                let x=''
        function locationGet(event){
            event.preventDefault()
            var url=''
            navigator.geolocation.getCurrentPosition((position) => {
    let lat = position.coords.latitude;
    let long = position.coords.longitude;
    //url='http://localhost:5105/Serviceproviders/'+text+'/'+lat+'/'+long
    x=long
    u=lat
    console.log(url)
    //const res =  axios.get(url);
    //console.log(res)

  });
        }
                async function signupUser(event){
                    event.preventDefault()
                    const firstname=document.getElementById('firstname')
                    const lastname=document.getElementById('lastname')
                    const email=document.getElementById('email')
                    const password=document.getElementById('password')
                    const phn=document.getElementById('phone')
                    const nid=document.getElementById('nid')
                    var e = document.getElementById("ddlViewBy");
var value = e.value;
var text = e.options[e.selectedIndex].text;
                    try {
                    const res = await axios.post('http://localhost:5105/Add_ServiceProvider',
                     { firstname: firstname.value,
                        lastname:lastname.value,
                        phoneNumber:phn.value, 
                        email:email.value,
                        password: password.value,
                        nid:nid.value,
                        long:x,
                        lat:u,
                        ServiceType:value
                        });
                    console.log(res.data);
                    location.href = 'UserLogin.html';

                    } catch (err) {
                        console.log(err); 
                    } 
                } 
    
                form.addEventListener('submit', signupUser)
            </script>
            


</div>
    
</body>
</html>