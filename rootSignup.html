<!DOCTYPE html>
<html lang="en">
<head>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Sign Up Page</title>
    <link rel="stylesheet" href="SignupStyle.css">
    <link rel="stylesheet" href="topnav.css">
    <link rel="stylesheet" type=text/css href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>

<body  background="/peshaback.jpg">
    <div class="topnav">
        <a href="http://127.0.0.1:5500/rootLogin.html">Login</a>
        <a href="http://127.0.0.1:5500/rootSignup.html">Sign Up</a>
        <a href="http://127.0.0.1:5500/Contact.html">Contact</a>
        <a href="http://127.0.0.1:5500/About.html">About</a>
        <a href="http://127.0.0.1:5500/rootLogin.html">Logout</a>
      </div>
    <div class="sign-up-page" >
        <h1><i class="fa fa-user-circle"></i>Sign up Here</h1>
            <form id="signup-form">
                <a href="http://127.0.0.1:5500/UserSignup.html">Sign up as User</a><br>
                <a href="http://127.0.0.1:5500/ServiceProviderSignup.html">Sign up as Service Provider</a>

            </form>
            <script>
                const form = document.getElementById('signup-form')
    
                async function signupUser(event){
                    event.preventDefault()
                    const firstname=document.getElementById('firstname')
                    const email=document.getElementById('email')
                    const lastname=document.getElementById('lastname')
                    const password=document.getElementById('password')
                    const phone=document.getElementById('phone')
                    console.log(firstname.value)
                    console.log(lastname.value)
                    console.log(email.value)
                    console.log(password.value)
                    console.log(phone.value)


                    try {
                    const res = await axios.post('http://localhost:5105/signup-user',
                     { 
                        firstname: firstname.value,
                        lastname:lastname.value, 
                        email:email.value,
                        password: password.value,
                        PhoneNumber:phone.value
                     });

                    console.log(res.data);

                    if (res.data.status === 'Success' && res.data.message!=='Failed') {
                        location.href = 'UserLogin.html';
                    }
                    else{
                        alert(
                            'Please Fill in the info properly'
                        )
                    }

                    } catch (err) {
                        console.log(err); 
                    } 
                } 

                form.addEventListener('submit', signupUser)
            </script>
            


</div>
    
</body>
</html>