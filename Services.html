<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <link rel="stylesheet" href="topnav.css">
    <link rel="stylesheet" href="HomeServices.css">
    <title>Document</title>
</head>
<body >
    <div class="topnav">
        <a class="active" href="#home">Home</a>
        <a href="http://127.0.0.1:5500/UserLogin.html">Login</a>
        <a href="http://127.0.0.1:5500/UserSignup.html">Sign Up</a>
        <a href="http://127.0.0.1:5500/Services.html">Requests</a>
        <a href="http://127.0.0.1:5500/Contact.html">Contact</a>
        <a href="http://127.0.0.1:5500/About.html">About</a>
        <a href="http://127.0.0.1:5500/rootLogin.html">Logout</a>
      </div>
      <div class="wrap">
        <div class="search">
           <input type="text" class="searchTerm" placeholder="What are you looking for?">
           <button type="submit" class="searchButton">
             <i class="fa fa-search"></i>
          </button>
        </div>
     </div>

<h1 style="margin-left: 10%; margin-top: 4%;">
    Past Services:
</h1>
<div id ="cl">

</div>
</body>


    
      <script>
        window.onload = async function get(){
          try {
      const temp = window.location.href.split("=")[1];
                const url= "http://localhost:5105/requests";
                const res = await axios.get(url);
                console.log(res.data)
                var parser = ''
                parser+='<div  style="width:500px; text-align: left;height:100px; margin-left:10%";>  '
                for(var i=0;i<res.data.length;i++){
                  var myobj=  res.data[i];
                  parser+='<div style ="padding:4% ; background:#C0C0C0;  margin:3%">'
                  parser+='ID: '+ myobj['serviceId']
                  parser+='</br>'
                  parser+= 'Location: '+ myobj['userAddress']
                  parser+='</br>'
                  parser+= 'Contact: '+ myobj['userPhoneNumber']
                  parser+='</br>'
                  parser +='<a  href=""'
                    parser+='"><button >Call Now</button></a></br>'
                  parser+='</div>'

                }
                parser+='</div>'
                const cl = document.getElementById("cl");
                 cl.innerHTML = parser;
                
                } catch (err) {
                    alert(
                      err
                        )
                } 
        }
            
    </script>
</body>
</html>